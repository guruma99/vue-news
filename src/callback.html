<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>jquery ajax</title>
  </head>
  <body>
    <div>jquery ajax</div>

    <!-- ì œì´ì¿¼ë¦¬ CDN -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
      // ğŸ§ğŸ’¡ğŸ’¡ promiseë¬¸ë²•!!!!
      // ì„±ê³µ,ì‹¤íŒ¨ì— ëŒ€í•œ ìƒíƒœë¥¼ ê°€ì§€ê³  ìˆë‹¤. ê°ì²´ë¼ëŠ” ê²ƒì€ resolve, reject  ë¥¼ ì¸ìë¡œ ë°›ëŠ”ë‹¤.
      // .then (); -- > ì˜ì–´ ë´ì€ ê·¸ë¦¬ê³ ë‚˜ë©´, ì´ë¼ëŠ” ëœ»: ì„±ê³µí›„!
      // .catch (); -- > ì‹¤íŒ¨í•˜ë©´, ì—ëŸ¬ ì¡ê¸°
      // .then, .catchì“°ë ¤ë©´, promiseë¡œ ë°˜í™˜í•´ì¤˜ì•¼í•œë‹¤.

      function callAjax() {
        return new Promise(function (resolve, reject) {
          $.ajax({
            url: "https://api.hnpwa.com/v0/news/1.json",
            // success: ajaxìš”ì²­ì´ ì„±ê³µí–ˆì„ ë•Œë§Œ ì‹¤í–‰í•˜ê²Œ ëœë‹¤. --> ajaxë¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œë§Œ ì œê³µë˜ëŠ” ì½œë°±í•¨ìˆ˜
            success: function (data) {
              resolve(data);
            },
          });
        });
      }

      function fetchData() {
        // 1
        var result = [];

        //new Promiseê°€ ì—¬ê¸°ì„œ ë–¨ì–´ì§€ê²Œ ë˜ë©´ì„œ resolve í•˜ê²Œë˜ë©´ ì‹¤í–‰í•˜ë ´ì´ ë  ìˆ˜ ìˆë‹¤.
        callAjax().then(function (data) {
          console.log("ë°ì´í„° í˜¸ì¶œ ê²°ê³¼", data);
          result = data;
          console.log("í•¨ìˆ˜ ê²°ê³¼", result);
        });

        // // 2  -> jqueryì—ì„œ ajax ë§ì´ ì“´ë‹¤.
        // $.ajax({
        //   url: "https://api.hnpwa.com/v0/news/1.json",
        //   success: function (data) {
        //     console.log("ë°ì´í„° í˜¸ì¶œ ê²°ê³¼", data);
        //     result = data;
        //     //ì´ê±¸ í•¨ìˆ˜ì•ˆì— ë„£ì–´ì„œ !
        //     console.log("í•¨ìˆ˜ ê²°ê³¼", result);
        //   },
        // });

        // 3
        // console.log("í•¨ìˆ˜ ê²°ê³¼", result);
      }
    </script>
  </body>
</html>
